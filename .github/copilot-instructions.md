# HÆ°á»›ng dáº«n AI Agent - Há»‡ Thá»‘ng Quáº£n LÃ½ Äá»™i BÃ³ng (Distributed Database)

## ğŸ¯ Tá»•ng quan kiáº¿n trÃºc

ÄÃ¢y lÃ  á»©ng dá»¥ng **JavaFX Desktop** quáº£n lÃ½ Ä‘á»™i bÃ³ng vá»›i **cÆ¡ sá»Ÿ dá»¯ liá»‡u phÃ¢n tÃ¡n (Distributed Database)** trÃªn SQL Server. Dá»± Ã¡n thuá»™c Ä‘á»“ Ã¡n mÃ´n **CÆ¡ Sá»Ÿ Dá»¯ Liá»‡u PhÃ¢n TÃ¡n**.

### Kiáº¿n trÃºc 3-layer phÃ¢n tÃ¡n:
```
JavaFX UI (controllers/) 
    â†“
Business Logic (services/)
    â†“
Data Access Layer (dao/) â†’ [DB1: CLB1_SD1] + [DB2: CLB2_SD2]
```

## ğŸ—„ï¸ Chiáº¿n lÆ°á»£c phÃ¢n máº£nh dá»¯ liá»‡u (QUAN TRá»ŒNG!)

Há»‡ thá»‘ng sá»­ dá»¥ng **2 SQL Server instances** vá»›i phÃ¢n máº£nh ngang (horizontal fragmentation):

### Database 1: `QL_BongDa_CLB1_SD1` (Server: Winter hoáº·c localhost:1433)
- **DoiBong:** `WHERE CLB = 'CLB1'`
- **CauThu:** PhÃ¢n máº£nh theo `MaDB` cá»§a Ä‘á»™i thuá»™c CLB1
- **TranDau:** `WHERE SanDau = 'SD1'`
- **ThamGia:** PhÃ¢n máº£nh theo `MaTD` cá»§a tráº­n Ä‘áº¥u táº¡i SD1

### Database 2: `QL_BongDa_CLB2_SD2` (Server: sv1 hoáº·c localhost:1434)
- **DoiBong:** `WHERE CLB = 'CLB2'`
- **CauThu:** PhÃ¢n máº£nh theo `MaDB` cá»§a Ä‘á»™i thuá»™c CLB2
- **TranDau:** `WHERE SanDau = 'SD2'`
- **ThamGia:** PhÃ¢n máº£nh theo `MaTD` cá»§a tráº­n Ä‘áº¥u táº¡i SD2

**LÆ¯U Ã:** 
- CLB1 cÃ³ thá»ƒ cÃ³ nhiá»u Ä‘á»™i (vÃ­ dá»¥: DB01, DB02) - Ä‘áº¡i diá»‡n cho giáº£i Ä‘áº¥u
- CLB2 tÆ°Æ¡ng tá»± (vÃ­ dá»¥: DB03, DB04)
- Má»—i tráº­n Ä‘áº¥u chá»‰ diá»…n ra táº¡i 1 sÃ¢n (SD1 hoáº·c SD2)

## ğŸ“‹ Schema Models (package `models/`)

4 entity classes tÆ°Æ¡ng á»©ng vá»›i global schema:
- `DoiBong`: (MaDB*, TenDB, CLB) - *khÃ³a chÃ­nh
- `CauThu`: (MaCT*, HoTen, ViTri, MaDB#) - #khÃ³a ngoáº¡i
- `TranDau`: (MaTD*, MaDB1#, MaDB2#, TrongTai, SanDau)
- `ThamGia`: (MaTD*, MaCT*, SoTrai) - *khÃ³a chÃ­nh kÃ©p

**Convention:** 
- Sá»­ dá»¥ng **camelCase** cho tÃªn biáº¿n Java
- TÃªn cá»™t DB viáº¿t **khÃ´ng dáº¥u, PascalCase** (MaDB, HoTen, SoTrai)
- KhÃ´ng dÃ¹ng Lombok (code POJO thá»§ cÃ´ng)

## ğŸ”Œ Káº¿t ná»‘i Database phÃ¢n tÃ¡n

File `utils/DatabaseConnection.java` quáº£n lÃ½ **2 connections Ä‘á»“ng thá»i**:

```java
// Pattern cáº§n implement:
public class DatabaseConnection {
    private static Connection conn1; // CLB1_SD1
    private static Connection conn2; // CLB2_SD2
    
    public static Connection getConnection1() { ... }
    public static Connection getConnection2() { ... }
}
```

**Quan trá»ng:** Má»i query phÃ¢n tÃ¡n pháº£i:
1. XÃ¡c Ä‘á»‹nh dá»¯ liá»‡u náº±m á»Ÿ DB nÃ o (dá»±a vÃ o CLB hoáº·c SanDau)
2. Káº¿t ná»‘i Ä‘Ãºng instance
3. Merge káº¿t quáº£ náº¿u cáº§n query cáº£ 2 DB

## ğŸ¯ 10 cÃ¢u truy váº¥n báº¯t buá»™c (services/)

Táº¥t cáº£ service methods pháº£i xá»­ lÃ½ **distributed queries**:

### CÃ¢u 1-2: Query trÃªn 1 hoáº·c 2 DB
- **CÃ¢u 1:** TÃ¬m cáº§u thá»§ theo CLB â†’ Query DB tÆ°Æ¡ng á»©ng vá»›i CLB
- **CÃ¢u 2:** Äáº¿m tráº­n cá»§a cáº§u thá»§ â†’ JOIN CauThu + ThamGia (cÃ³ thá»ƒ cáº§n 2 DB)

### CÃ¢u 3-4: Aggregation phÃ¢n tÃ¡n
- **CÃ¢u 3:** Tráº­n hÃ²a theo sÃ¢n â†’ Query DB theo SanDau, tÃ­nh SUM(SoTrai) cho má»—i Ä‘á»™i
- **CÃ¢u 4:** Vua phÃ¡ lÆ°á»›i â†’ UNION káº¿t quáº£ tá»« cáº£ 2 DB, tÃ¬m MAX(SoTrai)

### CÃ¢u 5-10: JOIN phá»©c táº¡p
- **CÃ¢u 5-6:** JOIN nhiá»u báº£ng qua 2 DB
- **CÃ¢u 7-8:** Filter vá»›i Ä‘iá»u kiá»‡n (SoTrai = 0, COUNT >= 3)
- **CÃ¢u 9:** Tá»•ng bÃ n tháº¯ng Ä‘á»™i â†’ JOIN TranDau + ThamGia + CauThu
- **CÃ¢u 10:** LEFT JOIN Ä‘á»ƒ tÃ¬m cáº§u thá»§ chÆ°a tham gia

**Pattern xá»­ lÃ½:**
```java
// VÃ­ dá»¥ CÃ¢u 4 - Vua phÃ¡ lÆ°á»›i
public List<CauThu> findTopScorer() {
    List<CauThu> fromDB1 = queryDB1();
    List<CauThu> fromDB2 = queryDB2();
    return mergeAndFindMax(fromDB1, fromDB2);
}
```

## ğŸ¨ Giao diá»‡n JavaFX - Sidebar Navigation (controllers/ + resources/fxml/)

### Kiáº¿n trÃºc UI - Multi-Page vá»›i Sidebar:
Giao diá»‡n dáº¡ng **Dashboard** vá»›i sidebar Ä‘iá»u hÆ°á»›ng giá»¯a cÃ¡c trang:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ† Há»† THá»NG QUáº¢N LÃ Äá»˜I BÃ“NG - PHÃ‚N TÃN                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ SIDEBAR  â”‚  CONTENT AREA (Dynamic Pages)                            â”‚
â”‚          â”‚                                                          â”‚
â”‚ ğŸ  Tá»•ng   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚    quan  â”‚  â”‚  [Page content thay Ä‘á»•i]                       â”‚    â”‚
â”‚          â”‚  â”‚                                                â”‚    â”‚
â”‚ ğŸ‘¥ Äá»™i    â”‚  â”‚  - Login                                       â”‚    â”‚
â”‚    bÃ³ng  â”‚  â”‚  - CRUD Äá»™i bÃ³ng                               â”‚    â”‚
â”‚          â”‚  â”‚  - CRUD Cáº§u thá»§                                â”‚    â”‚
â”‚ âš½ Cáº§u    â”‚  â”‚  - CRUD Tráº­n Ä‘áº¥u                               â”‚    â”‚
â”‚    thá»§   â”‚  â”‚  - CRUD Tham gia                               â”‚    â”‚
â”‚          â”‚  â”‚  - 10 Queries                                  â”‚    â”‚
â”‚ ğŸŸï¸ Tráº­n   â”‚  â”‚                                                â”‚    â”‚
â”‚    Ä‘áº¥u   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚          â”‚                                                          â”‚
â”‚ ğŸ“Š Thá»‘ng â”‚                                                          â”‚
â”‚    kÃª    â”‚                                                          â”‚
â”‚          â”‚                                                          â”‚
â”‚ ğŸ” Truy  â”‚                                                          â”‚
â”‚    váº¥n   â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“‹ Mockup chi tiáº¿t tá»«ng mÃ n hÃ¬nh:

---

#### **1. CauThuManagement.fxml** - CRUD + Filter máº£nh

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš½ QUáº¢N LÃ Cáº¦U THá»¦                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  THÃŠM Má»šI Cáº¦U THá»¦                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ MÃ£ CT: [________]  CLB: [CLB1 â–¼]  Äá»™i: [DB01 â–¼]         â”‚ â”‚
â”‚  â”‚ Há» tÃªn: [___________________]  Vá»‹ trÃ­: [Tiá»n Ä‘áº¡o â–¼]     â”‚ â”‚
â”‚  â”‚ [â• ThÃªm] [âœï¸ Sá»­a] [ğŸ—‘ï¸ XÃ³a] [ğŸ” TÃ¬m kiáº¿m]               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ—„ï¸ HIá»‚N THá»Š:  â— Táº¥t cáº£ (Merge)  â—‹ Chá»‰ DB1 (CLB1)  â—‹ Chá»‰ DB2 â”‚  â† NEW!
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  DANH SÃCH Cáº¦U THá»¦                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â˜‘ â”‚ MaCT â”‚ Há» TÃªn    â”‚ Vá»‹ trÃ­   â”‚ Äá»™i  â”‚ CLB  â”‚ Máº£nh  â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ â˜ â”‚ CT01 â”‚ Nguyá»…n A  â”‚ Tiá»n Ä‘áº¡o â”‚ DB01 â”‚ CLB1 â”‚ DB1   â”‚ â”‚
â”‚  â”‚ â˜ â”‚ CT02 â”‚ Tráº§n B    â”‚ Háº­u vá»‡   â”‚ DB02 â”‚ CLB1 â”‚ DB1   â”‚ â”‚
â”‚  â”‚ â˜ â”‚ CT03 â”‚ LÃª C      â”‚ Thá»§ mÃ´n  â”‚ DB03 â”‚ CLB2 â”‚ DB2   â”‚ â”‚
â”‚  â”‚ â˜ â”‚ CT04 â”‚ Pháº¡m D    â”‚ Tiá»n vá»‡  â”‚ DB04 â”‚ CLB2 â”‚ DB2   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  ğŸ“Š Tá»•ng: 4 cáº§u thá»§ (2 tá»« CLB1/DB1, 2 tá»« CLB2/DB2)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Xá»­ lÃ½ filter máº£nh:**
```java
@FXML private RadioButton rbAll, rbDB1, rbDB2;

@FXML void handleFilterChange() {
    List<CauThu> result;
    
    if (rbAll.isSelected()) {
        // Merge cáº£ 2 máº£nh
        List<CauThu> fromDB1 = cauThuDAO.findAll(conn1);
        List<CauThu> fromDB2 = cauThuDAO.findAll(conn2);
        result = new ArrayList<>();
        result.addAll(fromDB1);
        result.addAll(fromDB2);
    } else if (rbDB1.isSelected()) {
        // Chá»‰ tá»« DB1
        result = cauThuDAO.findAll(conn1);
    } else {
        // Chá»‰ tá»« DB2
        result = cauThuDAO.findAll(conn2);
    }
    
    tableView.getItems().setAll(result);
}
```

---

#### **2. QueryManagement.fxml** - 10 cÃ¢u query trong TabPane

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ” TRUY Váº¤N PHÃ‚N TÃN                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Q1: CT theo CLB] [Q2: Sá»‘ tráº­n] [Q3: Tráº­n hÃ²a] ... [Q10]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€ CÃ¢u 1: TÃ¬m cáº§u thá»§ theo CLB â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  Nháº­p CLB: [CLB1    ]  [ğŸ” TÃ¬m cáº§u thá»§]                 â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚ MaCT â”‚ Há» TÃªn      â”‚ Vá»‹ trÃ­    â”‚ Äá»™i   â”‚          â”‚ â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚
â”‚  â”‚  â”‚ CT01 â”‚ Nguyá»…n A    â”‚ Tiá»n Ä‘áº¡o  â”‚ DB01  â”‚          â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ CT02 â”‚ Tráº§n B      â”‚ Háº­u vá»‡    â”‚ DB02  â”‚          â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚  ğŸ“Š Káº¿t quáº£: 2 cáº§u thá»§ (tá»« máº£nh DB1)                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Báº£ng mapping Input/Output cho 10 cÃ¢u:**

| CÃ¢u | Input Fields | Button | Output | Máº£nh DB |
|-----|-------------|--------|--------|---------|
| **Q1** | `TextField txtCLB` | ğŸ” TÃ¬m cáº§u thá»§ | TableView: MaCT, HoTen, ViTri, MaDB | DB1 hoáº·c DB2 |
| **Q2** | `TextField txtHoTen` | ğŸ“Š Äáº¿m tráº­n | Label: "Sá»‘ tráº­n: X" | DB1 + DB2 merge |
| **Q3** | `TextField txtSanDau` | ğŸŸï¸ TÃ­nh tráº­n hÃ²a | Label: "Sá»‘ tráº­n hÃ²a: X" | DB1 hoáº·c DB2 |
| **Q4** | (KhÃ´ng) | ğŸ‘‘ Vua phÃ¡ lÆ°á»›i | TableView: MaCT, HoTen, TongBanThang | DB1 + DB2 merge |
| **Q5** | `TextField txtHoTen`, `TextField txtTrongTai` | ğŸ” TÃ¬m tráº­n | TableView: MaTD, MaDB1, MaDB2, SanDau | DB1 + DB2 |
| **Q6** | `TextField txtHoTen1`, `TextField txtHoTen2` | ğŸ”„ So sÃ¡nh CLB | Label: "âœ… CÃ¹ng CLB" / "âŒ KhÃ¡c CLB" | DB1 + DB2 |
| **Q7** | (KhÃ´ng) | 0ï¸âƒ£ CT ghi 0 bÃ n | TableView: MaCT, HoTen | DB1 + DB2 merge |
| **Q8** | (KhÃ´ng) | â­ CT â‰¥3 tráº­n | TableView: MaCT, HoTen, SoTran | DB1 + DB2 merge |
| **Q9** | `TextField txtMaDB` | ğŸ¯ Tá»•ng bÃ n Ä‘á»™i | Label: "Tá»•ng bÃ n tháº¯ng: X" | DB1 hoáº·c DB2 |
| **Q10** | (KhÃ´ng) | ğŸ’¤ CT chÆ°a Ä‘Ã¡ | TableView: MaCT, HoTen, MaDB | DB1 + DB2 merge |

---

#### **3. DoiBongManagement.fxml** - CRUD Äá»™i bÃ³ng + Filter

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¥ QUáº¢N LÃ Äá»˜I BÃ“NG                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  MÃ£ Ä‘á»™i: [____]  TÃªn Ä‘á»™i: [______________]  CLB: [CLB1 â–¼]    â”‚
â”‚  [â• ThÃªm] [âœï¸ Sá»­a] [ğŸ—‘ï¸ XÃ³a] [ğŸ” TÃ¬m]                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ—„ï¸ Hiá»ƒn thá»‹:  â— Táº¥t cáº£  â—‹ CLB1 (DB1)  â—‹ CLB2 (DB2)          â”‚  â† NEW!
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ MaDB â”‚ TÃªn Äá»™i         â”‚ CLB  â”‚ Máº£nh â”‚ Sá»‘ CT â”‚          â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ DB01 â”‚ Barcelona A     â”‚ CLB1 â”‚ DB1  â”‚ 15    â”‚          â”‚ â”‚
â”‚  â”‚ DB02 â”‚ Barcelona B     â”‚ CLB1 â”‚ DB1  â”‚ 12    â”‚          â”‚ â”‚
â”‚  â”‚ DB03 â”‚ Real Madrid A   â”‚ CLB2 â”‚ DB2  â”‚ 18    â”‚          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  ğŸ“Š Tá»•ng: 3 Ä‘á»™i (2 tá»« DB1, 1 tá»« DB2)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### **4. TranDauManagement.fxml** - CRUD Tráº­n Ä‘áº¥u + Nháº­p Ä‘iá»ƒm

**ğŸ¯ LUá»’NG Xá»¬ LÃ ÄÃšNG:**
1. **Táº¡o tráº­n Ä‘áº¥u** â†’ Chá»‰ lÆ°u báº£ng `TranDau` (MaTD, MaDB1, MaDB2, TrongTai, SanDau)
2. **Click [ğŸ“ Äiá»ƒm]** â†’ Popup nháº­p Ä‘iá»ƒm
3. **Chá»n cáº§u thá»§ tham gia + nháº­p sá»‘ bÃ n** â†’ Tá»± Ä‘á»™ng lÆ°u vÃ o báº£ng `ThamGia`
4. **Káº¿t quáº£:** Dá»¯ liá»‡u Ä‘Æ°á»£c táº¡o theo thá»© tá»± logic: TranDau trÆ°á»›c â†’ ThamGia sau

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŸï¸ QUáº¢N LÃ TRáº¬N Äáº¤U & ÄIá»‚M Sá»                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Táº O TRáº¬N Äáº¤U Má»šI                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ MÃ£ tráº­n: [____]  Äá»™i 1: [DB01 â–¼]  Äá»™i 2: [DB02 â–¼]      â”‚ â”‚
â”‚  â”‚ Trá»ng tÃ i: [__________]  SÃ¢n Ä‘áº¥u: [SD1 â–¼]              â”‚ â”‚
â”‚  â”‚ [â• ThÃªm] [âœï¸ Sá»­a] [ğŸ—‘ï¸ XÃ³a]                              â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ âš ï¸ CHÃš Ã: Chá»‰ táº¡o khung tráº­n Ä‘áº¥u, chÆ°a cÃ³ Ä‘iá»ƒm sá»‘!      â”‚ â”‚
â”‚  â”‚          Click [ğŸ“ Äiá»ƒm] sau khi táº¡o Ä‘á»ƒ nháº­p káº¿t quáº£    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ—„ï¸ Hiá»ƒn thá»‹:  â— Táº¥t cáº£  â—‹ SD1 (DB1)  â—‹ SD2 (DB2)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  DANH SÃCH TRáº¬N Äáº¤U                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ MaTD â”‚ Äá»™i 1 vs Äá»™i 2  â”‚ Trá»ng tÃ i â”‚ SÃ¢n  â”‚ [Action]  â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ TD01 â”‚ DB01 vs DB02    â”‚ Nguyá»…n X  â”‚ SD1  â”‚ [ğŸ“ Äiá»ƒm] â”‚ â”‚  â† BÆ°á»›c 2
â”‚  â”‚ TD02 â”‚ DB03 vs DB04    â”‚ Tráº§n Y    â”‚ SD2  â”‚ [ğŸ“ Äiá»ƒm] â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  ğŸ“Š Tá»•ng: 2 tráº­n (1 táº¡i SD1/DB1, 1 táº¡i SD2/DB2)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

**BÆ°á»›c 2: Click [ğŸ“ Äiá»ƒm] â†’ Má»Ÿ popup nháº­p Ä‘iá»ƒm (Tá»± Ä‘á»™ng táº¡o báº£ng ThamGia):**

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ NHáº¬P ÄIá»‚M - Tráº§n TD01 (BÆ°á»›c 3)          â”‚
â”‚  DB01 (Barcelona A) vs DB02 (Barcelona B)   â”‚
â”‚  SÃ¢n: SD1 | Trá»ng tÃ i: Nguyá»…n X             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’¡ HÆ°á»›ng dáº«n: Tick cáº§u thá»§ tham gia, nháº­p  â”‚
â”‚     sá»‘ bÃ n tháº¯ng. Há»‡ thá»‘ng tá»± Ä‘á»™ng lÆ°u vÃ o  â”‚
â”‚     báº£ng ThamGia khi click [ğŸ’¾ LÆ°u]         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Äá»˜I DB01 (Barcelona A):                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â˜‘ Cáº§u thá»§       â”‚ Sá»‘ bÃ n â”‚          â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ â˜‘ CT01 (Nguyá»…n A) â”‚ [2]  â”‚  ğŸ¯ Ra sÃ¢nâ”‚ â”‚
â”‚  â”‚ â˜‘ CT02 (Tráº§n B)   â”‚ [0]  â”‚  ğŸ¯ Ra sÃ¢nâ”‚ â”‚
â”‚  â”‚ â˜ CT05 (HoÃ ng E)  â”‚ [_]  â”‚  ï¿½ Dá»± bá»‹â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Äá»˜I DB02 (Barcelona B):                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â˜‘ Cáº§u thá»§       â”‚ Sá»‘ bÃ n â”‚          â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ â˜‘ CT03 (LÃª C)     â”‚ [1]  â”‚  ğŸ¯ Ra sÃ¢nâ”‚ â”‚
â”‚  â”‚ â˜‘ CT04 (Pháº¡m D)   â”‚ [0]  â”‚  ğŸ¯ Ra sÃ¢nâ”‚ â”‚
â”‚  â”‚ â˜ CT06 (Minh F)   â”‚ [_]  â”‚  ï¿½ Dá»± bá»‹â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š Tá»· sá»‘ táº¡m tÃ­nh: DB01 [2] - [1] DB02    â”‚
â”‚  ğŸ¯ Cáº§u thá»§ tham gia: 4/6 cáº§u thá»§          â”‚
â”‚                                             â”‚
â”‚  [ğŸ’¾ LÆ°u táº¥t cáº£ vÃ o báº£ng ThamGia] [âŒ ÄÃ³ng] â”‚
â”‚       â†‘                                     â”‚
â”‚  INSERT INTO ThamGia (MaTD, MaCT, SoTrai)   â”‚
â”‚  vá»›i cÃ¡c cáº§u thá»§ Ä‘Æ°á»£c tick â˜‘                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ’¡ LUá»’NG Xá»¬ LÃ ÄÃšNG - Tá»ª TRáº¬N Äáº¤U Äáº¾N Báº¢NG THAM GIA:**

```java
// === BÆ¯á»šC 1: Táº¡o tráº­n Ä‘áº¥u (TranDauController.java) ===
@FXML void handleThem() {
    // Chá»‰ lÆ°u thÃ´ng tin tráº­n Ä‘áº¥u, CHÆ¯A cÃ³ Ä‘iá»ƒm sá»‘
    TranDau tran = new TranDau(
        txtMaTD.getText(),
        cbMaDB1.getValue(),
        cbMaDB2.getValue(),
        txtTrongTai.getText(),
        cbSanDau.getValue()
    );
    
    String sanDau = cbSanDau.getValue();
    Connection conn = sanDau.equals("SD1") ? conn1 : conn2;
    
    // Insert vÃ o báº£ng TranDau
    tranDauDAO.insert(tran, conn);
    
    showInfo("âœ… Táº¡o tráº­n Ä‘áº¥u thÃ nh cÃ´ng!\n" +
             "ğŸ’¡ BÃ¢y giá» click [ğŸ“ Äiá»ƒm] Ä‘á»ƒ nháº­p káº¿t quáº£ tráº­n Ä‘áº¥u");
    
    refreshTable();
}

// === BÆ¯á»šC 2: Click nÃºt [ğŸ“ Äiá»ƒm] â†’ Má»Ÿ popup ===
@FXML void handleNhapDiem() {
    TranDau tran = tableView.getSelectionModel().getSelectedItem();
    
    if (tran == null) {
        showError("âŒ Chá»n tráº­n Ä‘áº¥u cáº§n nháº­p Ä‘iá»ƒm!");
        return;
    }
    
    // XÃ¡c Ä‘á»‹nh DB dá»±a vÃ o SanDau
    Connection conn = tran.getSanDau().equals("SD1") ? conn1 : conn2;
    
    // Load TOÃ€N Bá»˜ cáº§u thá»§ cá»§a 2 Ä‘á»™i (chÆ°a filter)
    List<CauThu> doiNha = cauThuService.findByMaDB(tran.getMaDB1());
    List<CauThu> doiKhach = cauThuService.findByMaDB(tran.getMaDB2());
    
    // Má»Ÿ dialog - User sáº½ chá»n ai tham gia + nháº­p bÃ n tháº¯ng
    DiemSoDialog dialog = new DiemSoDialog(tran, doiNha, doiKhach, conn);
    dialog.showAndWait();
    
    // Refresh sau khi Ä‘Ã³ng (báº£ng ThamGia Ä‘Ã£ tá»± Ä‘á»™ng Ä‘Æ°á»£c táº¡o)
    refreshTable();
}

// === BÆ¯á»šC 3: Trong DiemSoDialog - Tá»± Ä‘á»™ng táº¡o báº£ng ThamGia ===
public class DiemSoDialog extends Stage {
    private TranDau tran;
    private Connection conn;
    private List<PlayerRow> playerRows = new ArrayList<>();
    
    // Class Ä‘á»ƒ quáº£n lÃ½ má»—i dÃ²ng cáº§u thá»§
    class PlayerRow {
        CheckBox checkBox;    // Tick = tham gia
        CauThu cauThu;
        TextField txtSoBan;   // Sá»‘ bÃ n tháº¯ng
        
        PlayerRow(CauThu ct) {
            this.cauThu = ct;
            this.checkBox = new CheckBox(ct.getHoTen());
            this.txtSoBan = new TextField("0");
            this.txtSoBan.setDisable(true);  // Disable máº·c Ä‘á»‹nh
            
            // Khi tick â†’ enable TextField
            checkBox.selectedProperty().addListener((obs, old, newVal) -> {
                txtSoBan.setDisable(!newVal);
                if (!newVal) txtSoBan.setText("0");  // Uncheck = reset vá» 0
                updateTyso();
            });
            
            txtSoBan.textProperty().addListener((obs, old, newVal) -> {
                updateTyso();  // Cáº­p nháº­t tá»· sá»‘ real-time
            });
        }
    }
    
    public DiemSoDialog(TranDau tran, List<CauThu> doi1, List<CauThu> doi2, Connection conn) {
        this.tran = tran;
        this.conn = conn;
        
        // Táº¡o UI vá»›i CheckBox + TextField cho má»—i cáº§u thá»§
        VBox root = new VBox(15);
        
        // Äá»™i 1
        root.getChildren().add(new Label("Äá»˜I " + tran.getMaDB1()));
        for (CauThu ct : doi1) {
            PlayerRow row = new PlayerRow(ct);
            playerRows.add(row);
            
            HBox hbox = new HBox(10, row.checkBox, row.txtSoBan);
            root.getChildren().add(hbox);
        }
        
        // Äá»™i 2
        root.getChildren().add(new Label("Äá»˜I " + tran.getMaDB2()));
        for (CauThu ct : doi2) {
            PlayerRow row = new PlayerRow(ct);
            playerRows.add(row);
            
            HBox hbox = new HBox(10, row.checkBox, row.txtSoBan);
            root.getChildren().add(hbox);
        }
        
        // NÃºt lÆ°u
        Button btnLuu = new Button("ğŸ’¾ LÆ°u táº¥t cáº£ vÃ o báº£ng ThamGia");
        btnLuu.setOnAction(e -> luuTatCa());
        
        root.getChildren().add(btnLuu);
        setScene(new Scene(root, 500, 600));
    }
    
    // === BÆ¯á»šC 4: LÆ°u vÃ o báº£ng ThamGia ===
    void luuTatCa() {
        try {
            ThamGiaDAO dao = new ThamGiaDAO();
            
            // XÃ³a dá»¯ liá»‡u cÅ© cá»§a tráº­n nÃ y (náº¿u cÃ³)
            dao.deleteByMaTD(tran.getMaTD(), conn);
            
            // Chá»‰ lÆ°u cÃ¡c cáº§u thá»§ Ä‘Æ°á»£c TICK â˜‘
            for (PlayerRow row : playerRows) {
                if (row.checkBox.isSelected()) {  // â† CHá»ˆ lÆ°u khi tick
                    int soBan = Integer.parseInt(row.txtSoBan.getText());
                    
                    ThamGia tg = new ThamGia(
                        tran.getMaTD(),
                        row.cauThu.getMaCT(),
                        soBan
                    );
                    
                    // INSERT vÃ o báº£ng ThamGia
                    dao.insert(tg, conn);
                }
            }
            
            showInfo("âœ… ÄÃ£ lÆ°u káº¿t quáº£ tráº­n Ä‘áº¥u vÃ o báº£ng ThamGia!");
            close();
            
        } catch (Exception ex) {
            showError("âŒ Lá»—i lÆ°u dá»¯ liá»‡u: " + ex.getMessage());
        }
    }
    
    void updateTyso() {
        // TÃ­nh tá»· sá»‘ real-time tá»« cÃ¡c TextField
        // (Code tÃ­nh tá»•ng bÃ n tháº¯ng cá»§a má»—i Ä‘á»™i)
    }
}
```

**ğŸ¯ Káº¾T QUáº¢:**
- Báº£ng `TranDau`: TD01, DB01, DB02, Nguyá»…n X, SD1
- Báº£ng `ThamGia` (tá»± Ä‘á»™ng Ä‘Æ°á»£c táº¡o):
  - (TD01, CT01, 2)  â† CT01 Ä‘Æ°á»£c tick, ghi 2 bÃ n
  - (TD01, CT02, 0)  â† CT02 Ä‘Æ°á»£c tick, khÃ´ng ghi bÃ n
  - (TD01, CT03, 1)  â† CT03 Ä‘Æ°á»£c tick, ghi 1 bÃ n
  - (TD01, CT04, 0)  â† CT04 Ä‘Æ°á»£c tick, khÃ´ng ghi bÃ n
  - (CT05, CT06 KHÃ”NG cÃ³ trong báº£ng vÃ¬ khÃ´ng Ä‘Æ°á»£c tick)

**âœ… Lá»¢I ÃCH LUá»’NG NÃ€Y:**
1. **Logic tá»± nhiÃªn:** Táº¡o tráº­n â†’ Nháº­p káº¿t quáº£ (theo Ä‘Ãºng thá»© tá»± thá»±c táº¿)
2. **Tá»± Ä‘á»™ng:** User khÃ´ng cáº§n thao tÃ¡c vá»›i báº£ng ThamGia trá»±c tiáº¿p
3. **Linh hoáº¡t:** CÃ³ thá»ƒ sá»­a Ä‘iá»ƒm sá»‘ sau (click láº¡i [ğŸ“ Äiá»ƒm])
4. **Dá»¯ liá»‡u sáº¡ch:** Chá»‰ lÆ°u cáº§u thá»§ thá»±c sá»± tham gia (tick â˜‘)
```

---

#### **5. Xem Chi Tiáº¿t Tráº­n Äáº¥u (ThamGia) - KHÃ”NG Cáº¦N MÃ€N HÃŒNH RIÃŠNG**

**ğŸ’¡ ThamGia Ä‘Æ°á»£c hiá»ƒn thá»‹ TRONG mÃ n hÃ¬nh TranDauManagement:**

**CÃ¡ch 1: Tab bÃªn trong TranDau (Ä‘á» xuáº¥t)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŸï¸ QUáº¢N LÃ TRáº¬N Äáº¤U                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ğŸ“‹ Danh sÃ¡ch tráº­n] [ğŸ‘¤ Chi tiáº¿t tráº­n Ä‘Ã£ chá»n]              â”‚  â† TabPane
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“‹ TAB: DANH SÃCH TRáº¬N Äáº¤U                                    â”‚
â”‚  (CRUD nhÆ° mockup trÃªn - cÃ³ nÃºt [ğŸ“ Äiá»ƒm])                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Khi click vÃ o 1 tráº­n â†’ Chuyá»ƒn sang tab "Chi tiáº¿t":

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŸï¸ QUáº¢N LÃ TRáº¬N Äáº¤U                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ï¿½ Danh sÃ¡ch tráº­n] [ğŸ‘¤ Chi tiáº¿t tráº­n TD01] â† Active        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ‘¤ CHI TIáº¾T TRáº¬N Äáº¤U TD01                                     â”‚
â”‚  DB01 (Barcelona A) vs DB02 (Barcelona B)                      â”‚
â”‚  Trá»ng tÃ i: Nguyá»…n X | SÃ¢n: SD1 | [ğŸ“ Sá»­a Ä‘iá»ƒm]              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ¯ Cáº¦U THá»¦ THAM GIA & ÄIá»‚M Sá»                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Äá»™i  â”‚ Cáº§u thá»§         â”‚ Vá»‹ trÃ­   â”‚ Sá»‘ bÃ n â”‚ ğŸ”¥ Hiá»‡u suáº¥tâ”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ DB01 â”‚ CT01 (Nguyá»…n A) â”‚ Tiá»n Ä‘áº¡o â”‚   2    â”‚ â­â­      â”‚ â”‚
â”‚  â”‚ DB01 â”‚ CT02 (Tráº§n B)   â”‚ Háº­u vá»‡   â”‚   0    â”‚ â­        â”‚ â”‚
â”‚  â”‚ DB02 â”‚ CT03 (LÃª C)     â”‚ Tiá»n Ä‘áº¡o â”‚   1    â”‚ â­â­      â”‚ â”‚
â”‚  â”‚ DB02 â”‚ CT04 (Pháº¡m D)   â”‚ Thá»§ mÃ´n  â”‚   0    â”‚ â­        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  ğŸ“Š Tá»· sá»‘ cuá»‘i: DB01 [2] - [1] DB02                           â”‚
â”‚  ğŸ¯ Tá»•ng cáº§u thá»§ ra sÃ¢n: 4 cáº§u thá»§                            â”‚
â”‚  ğŸ”¥ Vua phÃ¡ lÆ°á»›i tráº­n nÃ y: CT01 (2 bÃ n)                       â”‚
â”‚                                                                â”‚
â”‚  [â¬…ï¸ Quay láº¡i danh sÃ¡ch]  [ğŸ“ Sá»­a Ä‘iá»ƒm sá»‘]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**CÃ¡ch 2: Expandable Row (nÃ¢ng cao)**
- Má»—i dÃ²ng tráº­n Ä‘áº¥u cÃ³ nÃºt [â–¶ï¸ Chi tiáº¿t]
- Click â†’ Má»Ÿ rá»™ng row hiá»ƒn thá»‹ báº£ng ThamGia bÃªn dÆ°á»›i
- Giá»‘ng nhÆ° accordion/collapse pattern

**CÃ¡ch 3: Popup chá»‰ xem (Ä‘Æ¡n giáº£n nháº¥t)**
- ThÃªm nÃºt [ğŸ‘ï¸ Xem] bÃªn cáº¡nh [ğŸ“ Äiá»ƒm]
- Click â†’ Popup READ-ONLY hiá»ƒn thá»‹ báº£ng ThamGia

---

---

#### **6. Dashboard.fxml** - Tá»•ng quan

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ  DASHBOARD                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ ğŸ‘¥ Äá»™i  â”‚  â”‚ âš½ Cáº§u   â”‚  â”‚ ğŸŸï¸ Tráº­n â”‚  â”‚ ğŸ¯ BÃ n  â”‚         â”‚
â”‚  â”‚         â”‚  â”‚   thá»§   â”‚  â”‚   Ä‘áº¥u   â”‚  â”‚  tháº¯ng  â”‚         â”‚
â”‚  â”‚   24    â”‚  â”‚   158   â”‚  â”‚   36    â”‚  â”‚   245   â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š Thá»‘ng kÃª theo máº£nh:                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚ CLB1 (DB1)        â”‚ CLB2 (DB2)        â”‚                    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”‚
â”‚  â”‚ 12 Ä‘á»™i            â”‚ 12 Ä‘á»™i            â”‚                    â”‚
â”‚  â”‚ 79 cáº§u thá»§        â”‚ 79 cáº§u thá»§        â”‚                    â”‚
â”‚  â”‚ 18 tráº­n (SD1)     â”‚ 18 tráº­n (SD2)     â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ† TOP SCORER                                                 â”‚
â”‚  1. Nguyá»…n A (CT01) - 15 bÃ n                                   â”‚
â”‚  2. Tráº§n B (CT02) - 12 bÃ n                                     â”‚
â”‚  3. LÃª C (CT03) - 10 bÃ n                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Cáº¥u trÃºc Pages (FXML Files):

```
Sidebar Navigation:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ  Tá»•ng quan        â”‚  â† Dashboard.fxml
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“‹ QUáº¢N LÃ          â”‚
â”‚   ğŸ‘¥ Äá»™i bÃ³ng       â”‚  â† DoiBongManagement.fxml
â”‚   âš½ Cáº§u thá»§        â”‚  â† CauThuManagement.fxml
â”‚   ğŸŸï¸ Tráº­n Ä‘áº¥u       â”‚  â† TranDauManagement.fxml 
â”‚                     â”‚     â€¢ CRUD tráº­n Ä‘áº¥u
â”‚                     â”‚     â€¢ [ğŸ“ Äiá»ƒm] â†’ Nháº­p Ä‘iá»ƒm (táº¡o ThamGia)
â”‚                     â”‚     â€¢ Tab/Popup hiá»ƒn thá»‹ chi tiáº¿t (xem ThamGia)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ” Truy váº¥n         â”‚  â† QueryManagement.fxml
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸšª ÄÄƒng xuáº¥t        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

**LÆ¯U Ã:** ThamGia KHÃ”NG cÃ³ mÃ n hÃ¬nh riÃªng, Ä‘Æ°á»£c tÃ­ch há»£p hoÃ n toÃ n vÃ o TranDau
```

#### **1. Main.fxml** - Container chÃ­nh
- **MainController.java**: Quáº£n lÃ½ sidebar navigation
- Load cÃ¡c page con vÃ o `contentArea` (AnchorPane/BorderPane)

#### **2. Login.fxml** - MÃ n hÃ¬nh Ä‘Äƒng nháº­p
- **LoginController.java**: XÃ¡c thá»±c user, káº¿t ná»‘i DB
- Input: Username, Password
- Kiá»ƒm tra quyá»n truy cáº­p máº£nh DB1/DB2

#### **3. Dashboard.fxml** - Trang tá»•ng quan
- **DashboardController.java**
- Cards: Tá»•ng Ä‘á»™i bÃ³ng, cáº§u thá»§, tráº­n Ä‘áº¥u, bÃ n tháº¯ng
- Biá»ƒu Ä‘á»“: Top scorer, tráº­n Ä‘áº¥u gáº§n Ä‘Ã¢y
- So sÃ¡nh 2 máº£nh (CLB1 vs CLB2)

#### **4. CRUD Pages** - Tá»± Ä‘á»™ng routing + Filter máº£nh:

**Pattern chung cho táº¥t cáº£ CRUD:**
- **RadioButton group:** â— Táº¥t cáº£ â—‹ Máº£nh DB1 â—‹ Máº£nh DB2 (CHá»ˆ Ä‘á»ƒ XEM, khÃ´ng áº£nh hÆ°á»Ÿng CRUD)
- **Auto-routing khi thÃªm/sá»­a:** Dá»±a vÃ o **ComboBox CLB/SanDau** (KHÃ”NG pháº£i RadioButton)
- **Filter khi hiá»ƒn thá»‹:** User chá»n xem tá»« máº£nh nÃ o
- **Validation:** Check trÃ¹ng khÃ³a qua cáº£ 2 DB
- **Status bar:** Hiá»ƒn thá»‹ sá»‘ lÆ°á»£ng tá»« má»—i máº£nh

**a) DoiBongManagement.fxml**
- **DoiBongController.java**
- Filter hiá»ƒn thá»‹: â— Táº¥t cáº£ â—‹ CLB1 (DB1) â—‹ CLB2 (DB2)
- Auto-routing insert: User chá»n `ComboBox CLB` â†’ CLB1 = insert DB1, CLB2 = insert DB2
- **LÆ¯U Ã:** RadioButton CHá»ˆ Ä‘á»ƒ xem, ComboBox CLB quyáº¿t Ä‘á»‹nh insert vÃ o DB nÃ o

**b) CauThuManagement.fxml**
- **CauThuController.java**
- Filter hiá»ƒn thá»‹: â— Táº¥t cáº£ â—‹ CLB1 (DB1) â—‹ CLB2 (DB2)
- Auto-routing insert: Dá»±a vÃ o `ComboBox CLB` cá»§a Ä‘á»™i â†’ tÃ¬m CLB cá»§a Ä‘á»™i Ä‘Ã³ â†’ insert vÃ o DB tÆ°Æ¡ng á»©ng

**c) TranDauManagement.fxml** - Quáº£n lÃ½ tráº­n Ä‘áº¥u + Nháº­p/Xem Ä‘iá»ƒm (ThamGia tÃ­ch há»£p)
- **TranDauController.java**
- **Layout:** TabPane vá»›i 2 tabs:
  - **Tab 1: Danh sÃ¡ch tráº­n** - CRUD TranDau
  - **Tab 2: Chi tiáº¿t tráº­n** - Hiá»ƒn thá»‹ báº£ng ThamGia (tá»± Ä‘á»™ng load khi chá»n tráº­n)
- **Chá»©c nÄƒng Tab 1 (Danh sÃ¡ch tráº­n):**
  - CRUD tráº­n Ä‘áº¥u (ThÃªm, XÃ³a, Sá»­a) â†’ CHá»ˆ lÆ°u báº£ng TranDau
  - Button [ğŸ“ Nháº­p Ä‘iá»ƒm] â†’ Popup nháº­p Ä‘iá»ƒm â†’ **Tá»° Äá»˜NG táº¡o báº£ng ThamGia**
  - Click vÃ o 1 tráº­n â†’ Tá»± Ä‘á»™ng chuyá»ƒn sang Tab 2
- **Chá»©c nÄƒng Tab 2 (Chi tiáº¿t tráº­n):**
  - **Hiá»ƒn thá»‹ READ-ONLY:** TableView vá»›i cá»™t (Äá»™i, Cáº§u thá»§, Vá»‹ trÃ­, Sá»‘ bÃ n)
  - Load tá»« báº£ng `ThamGia` WHERE MaTD = tráº­n Ä‘ang chá»n
  - Hiá»ƒn thá»‹ tá»· sá»‘, top scorer cá»§a tráº­n Ä‘Ã³
  - Button [ğŸ“ Sá»­a Ä‘iá»ƒm] â†’ Má»Ÿ láº¡i popup nháº­p Ä‘iá»ƒm
  - Button [â¬…ï¸ Quay láº¡i] â†’ Chuyá»ƒn vá» Tab 1
- Filter: â— Táº¥t cáº£ â—‹ SD1 (DB1) â—‹ SD2 (DB2)
- Auto-routing: SD1 â†’ insert DB1, SD2 â†’ insert DB2
- **ğŸ’¡ LUá»’NG ÄÃšNG:**
  1. **Tab 1:** Táº¡o tráº­n Ä‘áº¥u â†’ LÆ°u vÃ o `TranDau` (chÆ°a cÃ³ Ä‘iá»ƒm)
  2. **Tab 1:** Click [ğŸ“ Äiá»ƒm] â†’ Popup nháº­p Ä‘iá»ƒm
  3. **Popup:** Tick â˜‘ cáº§u thá»§ tham gia + nháº­p sá»‘ bÃ n â†’ LÆ°u vÃ o `ThamGia`
  4. **Tab 2:** Click vÃ o tráº­n â†’ Tá»± Ä‘á»™ng hiá»ƒn thá»‹ báº£ng ThamGia cá»§a tráº­n Ä‘Ã³
  5. **Káº¿t quáº£:** ThamGia KHÃ”NG cáº§n CRUD riÃªng, hoÃ n toÃ n tÃ­ch há»£p trong TranDau

#### **5. Query Pages** (10 cÃ¢u truy váº¥n phÃ¢n tÃ¡n):

**Option 1: Táº¥t cáº£ trong 1 mÃ n hÃ¬nh (Ä‘á» xuáº¥t)**
- **QueryManagement.fxml** - 1 mÃ n hÃ¬nh duy nháº¥t
- **QueryController.java**
- Layout: TabPane hoáº·c Accordion vá»›i 10 tabs/sections
- Má»—i tab chá»©a input fields + button + TableView riÃªng
- Tiáº¿t kiá»‡m code, dá»… maintain

**Option 2: NhÃ³m theo Ä‘á»™ phá»©c táº¡p (3 mÃ n hÃ¬nh)**
- **QueryBasic.fxml** (CÃ¢u 1-3: Query Ä‘Æ¡n giáº£n)
  - Tab 1: TÃ¬m cáº§u thá»§ theo CLB
  - Tab 2: Sá»‘ tráº­n cá»§a cáº§u thá»§
  - Tab 3: Tráº­n hÃ²a theo sÃ¢n
  
- **QueryAdvanced.fxml** (CÃ¢u 4-7: Aggregation)
  - Tab 1: Vua phÃ¡ lÆ°á»›i
  - Tab 2: Tráº­n theo CT & trá»ng tÃ i
  - Tab 3: 2 CT cÃ¹ng CLB
  - Tab 4: CT tham gia 0 bÃ n
  
- **QueryStatistics.fxml** (CÃ¢u 8-10: Thá»‘ng kÃª)
  - Tab 1: CT tÃ­ch cá»±c (â‰¥3 tráº­n)
  - Tab 2: Tá»•ng bÃ n cá»§a Ä‘á»™i
  - Tab 3: CT chÆ°a thi Ä‘áº¥u

**Layout example (Option 1 - TabPane):**
```xml
<TabPane fx:id="queryTabs">
    <!-- CÃ¢u 1 -->
    <Tab text="Q1: CT theo CLB">
        <VBox spacing="10" padding="20">
            <HBox spacing="10">
                <Label text="Nháº­p CLB:"/>
                <TextField fx:id="txtCLB_Q1"/>
                <Button text="TÃ¬m" onAction="#handleQuery1"/>
            </HBox>
            <TableView fx:id="tableQ1"/>
        </VBox>
    </Tab>
    
    <!-- CÃ¢u 2 -->
    <Tab text="Q2: Sá»‘ tráº­n CT">
        <VBox spacing="10" padding="20">
            <HBox spacing="10">
                <Label text="Há» tÃªn:"/>
                <TextField fx:id="txtHoTen_Q2"/>
                <Button text="TÃ¬m" onAction="#handleQuery2"/>
            </HBox>
            <Label fx:id="lblResult_Q2" styleClass="result-label"/>
        </VBox>
    </Tab>
    
    <!-- ... CÃ¢u 3-10 tÆ°Æ¡ng tá»± -->
</TabPane>
```



### Controller Pattern:

```java
// MainController.java - Quáº£n lÃ½ navigation
public class MainController {
    @FXML private VBox sidebar;
    @FXML private AnchorPane contentArea;
    
    @FXML void showDashboard() { loadPage("Dashboard.fxml"); }
    @FXML void showDoiBong() { loadPage("DoiBongManagement.fxml"); }
    @FXML void showCauThu() { loadPage("CauThuManagement.fxml"); }
    @FXML void showQueries() { loadPage("QueryManagement.fxml"); }
    // ...
    
    private void loadPage(String fxmlFile) {
        Parent page = FXMLLoader.load(...);
        contentArea.getChildren().setAll(page);
    }
}

// QueryController.java - 10 queries trong 1 controller
public class QueryController {
    // Query 1 components
    @FXML private TextField txtCLB_Q1;
    @FXML private TableView<CauThu> tableQ1;
    
    // Query 2 components
    @FXML private TextField txtHoTen_Q2;
    @FXML private Label lblResult_Q2;
    
    // ... Q3-Q10 components
    
    private QueryService queryService = new QueryService();
    
    @FXML void handleQuery1() {
        String clb = txtCLB_Q1.getText();
        List<CauThu> result = queryService.query1_FindByClb(clb);
        tableQ1.getItems().setAll(result);
    }
    
    @FXML void handleQuery2() {
        String hoTen = txtHoTen_Q2.getText();
        int count = queryService.query2_CountMatches(hoTen);
        lblResult_Q2.setText("Sá»‘ tráº­n: " + count);
    }
    
    // ... Q3-Q10 methods
}

// DoiBongController.java - CRUD Example
public class DoiBongController {
    @FXML private TextField txtMaDB, txtTenDB;
    @FXML private ComboBox<String> cbCLB;
    @FXML private TableView<DoiBong> tableDoiBong;
    
    private DoiBongService service = new DoiBongService();
    
    @FXML void handleThem() {
        // 1. Validate input
        // 2. Kiá»ƒm tra MaDB trÃ¹ng qua 2 DB
        if (service.existsInBothDB(txtMaDB.getText())) {
            showError("MÃ£ Ä‘á»™i bÃ³ng Ä‘Ã£ tá»“n táº¡i!");
            return;
        }
        // 3. Insert vÃ o DB Ä‘Ãºng theo CLB
        service.insert(...);
        refreshTable();
    }
    
    @FXML void handleXoa() { /* XÃ³a tá»« DB tÆ°Æ¡ng á»©ng */ }
    @FXML void handleSua() { /* Update DB */ }
    @FXML void handleTimKiem() { /* Query from both DB */ }
}
```

### CSS Styling (resources/styles.css):

```css
/* Sidebar */
.sidebar {
    -fx-background-color: #1976D2;
    -fx-pref-width: 200px;
}

.sidebar-button {
    -fx-background-color: transparent;
    -fx-text-fill: white;
    -fx-font-size: 14px;
    -fx-padding: 15px;
    -fx-cursor: hand;
}

.sidebar-button:hover {
    -fx-background-color: #1565C0;
}

.sidebar-button:selected {
    -fx-background-color: #0D47A1;
    -fx-border-color: #FFC107;
    -fx-border-width: 0 0 0 4px;
}

/* Content Area */
.content-area {
    -fx-background-color: #F5F5F5;
    -fx-padding: 20px;
}

/* Buttons */
.btn-primary {
    -fx-background-color: #2196F3;
    -fx-text-fill: white;
    -fx-background-radius: 5px;
    -fx-cursor: hand;
}

.btn-success { -fx-background-color: #4CAF50; }
.btn-danger { -fx-background-color: #F44336; }
.btn-warning { -fx-background-color: #FF9800; }

/* TextFields */
.text-field {
    -fx-background-radius: 5px;
    -fx-border-radius: 5px;
    -fx-border-color: #BDBDBD;
}

.text-field:focused {
    -fx-border-color: #2196F3;
    -fx-border-width: 2px;
}

/* TableView */
.table-view {
    -fx-background-color: white;
    -fx-border-radius: 5px;
}

.table-view .column-header {
    -fx-background-color: #E3F2FD;
    -fx-font-weight: bold;
}
```

### Quy táº¯c xá»­ lÃ½ phÃ¢n máº£nh trong Controllers:

**QUAN TRá»ŒNG:** RadioButton filter CHá»ˆ áº£nh hÆ°á»Ÿng VIEW, KHÃ”NG áº£nh hÆ°á»Ÿng CRUD!

1. **ThÃªm (INSERT):**
   - XÃ¡c Ä‘á»‹nh máº£nh dá»±a vÃ o **ComboBox CLB/SanDau** (KHÃ”NG pháº£i RadioButton)
   - Kiá»ƒm tra khÃ³a chÃ­nh trÃ¹ng qua **cáº£ 2 DB** trÆ°á»›c khi insert
   - Insert vÃ o Ä‘Ãºng DB instance
   - (Optional) Tá»± Ä‘á»™ng chuyá»ƒn RadioButton vá» "Táº¥t cáº£" sau insert Ä‘á»ƒ tháº¥y record má»›i
   
   ```java
   @FXML void handleThem() {
       String clb = cbCLB.getValue(); // ComboBox, KHÃ”NG pháº£i RadioButton
       
       // XÃ¡c Ä‘á»‹nh DB dá»±a vÃ o CLB
       Connection targetConn = clb.equals("CLB1") ? conn1 : conn2;
       
       // Insert
       doiBongDAO.insert(doiBong, targetConn);
       
       // Auto switch vá» "Táº¥t cáº£" Ä‘á»ƒ tháº¥y record má»›i
       rbAll.setSelected(true);
       handleFilterChange(); // Refresh table
   }
   ```

2. **XÃ³a (DELETE):**
   - TÃ¬m record á»Ÿ DB nÃ o (dá»±a vÃ o CLB/SanDau cá»§a record)
   - XÃ³a khÃ³a ngoáº¡i liÃªn quan (cascade)
   - XÃ³a tá»« Ä‘Ãºng DB instance

3. **Sá»­a (UPDATE):**
   - Náº¿u thay Ä‘á»•i CLB/SanDau â†’ **Di chuyá»ƒn dá»¯ liá»‡u** giá»¯a 2 máº£nh
   - Pattern: SELECT â†’ DELETE (DB cÅ©) â†’ INSERT (DB má»›i)

4. **TÃ¬m kiáº¿m (SELECT):**
   - Náº¿u biáº¿t máº£nh â†’ Query 1 DB
   - Náº¿u khÃ´ng â†’ Query cáº£ 2 DB vÃ  UNION káº¿t quáº£
   
5. **Filter VIEW (RadioButton):**
   - CHá»ˆ áº£nh hÆ°á»Ÿng Ä‘áº¿n TableView hiá»ƒn thá»‹
   - KHÃ”NG áº£nh hÆ°á»Ÿng Ä‘áº¿n CRUD operations
   
   ```java
   @FXML void handleFilterChange() {
       // RadioButton CHá»ˆ Ä‘á»ƒ lá»c VIEW
       if (rbAll.isSelected()) {
           // Merge cáº£ 2 DB
           List<DoiBong> fromDB1 = doiBongDAO.findAll(conn1);
           List<DoiBong> fromDB2 = doiBongDAO.findAll(conn2);
           // Merge vÃ  hiá»ƒn thá»‹
       } else if (rbDB1.isSelected()) {
           // Chá»‰ hiá»ƒn thá»‹ DB1
       } else {
           // Chá»‰ hiá»ƒn thá»‹ DB2
       }
   }
   ```

## ğŸ”§ Build & Run

### Maven commands (PowerShell):
```powershell
mvn clean install          # Compile vÃ  download dependencies
mvn javafx:run            # Cháº¡y á»©ng dá»¥ng
mvn clean package         # Táº¡o JAR file
```

### Database setup cáº§n kiá»ƒm tra:
1. SQL Server instances Ä‘ang cháº¡y (port 1433 vÃ  1434)
2. Database `QL_BongDa_CLB1_SD1` vÃ  `QL_BongDa_CLB2_SD2` Ä‘Ã£ táº¡o
3. 4 tables (DoiBong, CauThu, TranDau, ThamGia) Ä‘Ã£ cÃ³ schema
4. Credentials trong `DatabaseConnection.java` Ä‘Ãºng

### Debugging:
- Báº­t SQL logging Ä‘á»ƒ xem queries thá»±c táº¿
- Test tá»«ng DB riÃªng trÆ°á»›c khi merge
- DÃ¹ng `System.out.println()` Ä‘á»ƒ trace data flow

## ğŸ“ Workflow phÃ¡t triá»ƒn tÃ­nh nÄƒng má»›i

Khi implement 1 cÃ¢u query (vÃ­ dá»¥ CÃ¢u 5):

1. **PhÃ¢n tÃ­ch phÃ¢n máº£nh:**
   - Tables nÃ o cáº§n? â†’ CauThu (phÃ¢n theo CLB), TranDau (phÃ¢n theo SanDau)
   - Cáº§n query DB nÃ o? â†’ CÃ³ thá»ƒ cáº£ 2
   
2. **Táº¡o DAO methods:**
   ```java
   // CauThuDAO.java
   List<CauThu> findByHoTen(String hoTen, Connection conn)
   
   // TranDauDAO.java
   List<TranDau> findByTrongTaiAndCauThu(String trongTai, String maCT, Connection conn)
   ```

3. **Táº¡o Service logic:**
   ```java
   // QueryService.java
   public List<TranDau> query5(String hoTen, String trongTai) {
       // 1. TÃ¬m cáº§u thá»§ tá»« cáº£ 2 DB
       // 2. JOIN vá»›i tráº­n Ä‘áº¥u
       // 3. Filter theo trá»ng tÃ i
       // 4. Merge results
   }
   ```

4. **Táº¡o Controller + FXML:**
   - Input: 2 TextField (hoTen, trongTai)
   - Output: TableView vá»›i columns (MaTD, MaDB1, MaDB2, TrongTai, SanDau)
   - Button: Gá»i service vÃ  hiá»ƒn thá»‹ káº¿t quáº£

5. **Test vá»›i data thá»±c:**
   - Insert test data vÃ o cáº£ 2 DB
   - Verify káº¿t quáº£ Ä‘Ãºng vá»›i yÃªu cáº§u Ä‘á» bÃ i

## âš ï¸ Lá»—i thÆ°á»ng gáº·p

1. **"No suitable driver"**: Thiáº¿u `mssql-jdbc` trong dependencies
2. **"Login failed"**: Sai credentials hoáº·c SQL Server khÃ´ng cho phÃ©p remote
3. **Empty result**: Query sai DB instance (check CLB/SanDau)
4. **NullPointerException**: KhÃ´ng check null khi JOIN bá»‹ rá»—ng
5. **FXML LoadException**: Sai path hoáº·c fx:id khÃ´ng match vá»›i controller

## ğŸ“ Quy táº¯c Ä‘áº·t tÃªn

- **Package:** lowercase (models, dao, services)
- **Class:** PascalCase (CauThuDAO, QueryService)
- **Method:** camelCase (findByHoTen, getTopScorer)
- **Variable:** camelCase (maCT, hoTen)
- **FXML id:** camelCase vá»›i prefix (txtCLB, tableResult, btnSearch)

---

**Má»¥c tiÃªu cuá»‘i:** á»¨ng dá»¥ng desktop hoÃ n chá»‰nh vá»›i 10 mÃ n hÃ¬nh query, xá»­ lÃ½ distributed database, UI Ä‘áº¹p vÃ  UX mÆ°á»£t mÃ .
